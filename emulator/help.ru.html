<h2 class="hol p">ЭМУЛЯТОР 8-БИТНЫХ РЕТРОКОМПЬЮТЕРОВ</h2>

<p>Эмулятор ориентирован на эмуляцию только РК-совместимых компьютеров -- текстовых компьютеров на базе микропроцессора
КР580ВМ80А (старое обозначение КР580ИК80А, клон микропроцессора Intel i8080A) и текстового видеоадаптера, построенного
на связке БИС КР580ВГ75 (контроллер электронно-лучевой трубки, клон i8275) и БИС КР580ВТ57 (контроллер прямого доступа
к памяти, старое обозначение КР580ИК57, клон i8257). Особенностью всех РК-совместимых компьютеров является организация
видеопамяти, часть которой, для упрощения аппаратной реализации, используется как импульсы гашения видеоизображения.
Это единственное, что объединяет всё семейство РК-совместимых компьютеров и делает возможным перенос программ между
компьютерами. Во всём остальном все компьютеры различаются: объём оперативной памяти, распределение адресного пространства
периферии, базовое ПО в ПЗУ и даже способ подключения клавиатуры (компьютер "Микроша") у всех компьютеров различаются.
<p>Цикл статей о радиолюбительском компьютере "Радио-86РК" журнал "Радио" начал публиковать в 1986 году с номера 4 (стр. 24).
<p>Список эмулируемых компьютеров:
<ul>
<li><span>Радио-86РК</span> -- классический "Радио-86РК" из журнала с объёмом ОЗУ 32 килобайта;
<li><span>Апогей БК-01Ц</span>;
<li><span>Микроша/48</span> -- компьютер "Микроша" с установленным модулем ОЗУ, увеличивающим объем ОЗУ до 48 килобайт;
<li><span>Микроша/ROM</span> -- компьютер "Микроша" с установленным модулем ПЗУ, запуск программ командой G8000;
<li><span>Криста</span>;
<li><span>Радио-86РК/32-Nova</span> -- улучшенный "Радио-86РК" с максимальной совместимостью;
<li><span>Радио-86РК/60-Nova</span> -- улучшенный "Радио-86РК" с объёмом ОЗУ 60 килобайт;
<li><span>Мега-86РК</span> -- мегаулучшенный "Радио-86РК", реализована частичная эмуляция.
</ul>

<p>Возможности и особенности эмулятора:
<ul>
<li>Поддерживается механизм <b>drag-and-drop</b> для быстрой загрузки и запуска программ;
<li>Поддерживается полноэкранный режим;
<li>Полноценная поддержка магнитофонных операций, реализован механизм как записи данных в файл, так и чтение из файла
через магнитофонные функции;
<li>Имеется возможность подключать к компьютеру ROM-диск;
<li>Поддерживаются две раскладки клавиатуры: <b>QWERTY</b> и <b>JCUKEN</b>;
<li>Поддерживаются три типа микропроцессора: <b>i8080</b>, <b>i8085</b>, <b>Z80</b>;
<li>Поддерживается изменение тактовой частоты микропроцессора на лету;
<li>Поддерживается воспроизведение однобитного звука;
<li>Поддерживается воспроизведение звука от генератора меандра;
<li>Имеется возможность делать снимки экрана (скриншоты) эмулируемого компьютера;
<li>Каталоги программ, для каждого компьютера отдельный каталог;
<li>Отладчик.
</ul>

<p>Структурно эмулятор можно разделить на следующие компоненты, с которыми происходит взаимодействие:
<ul>
<li>Экран;
<li>Каталог программ;
<li>Статусная строка;
<li>Панель конфигурации эмулятора;
<li>Отладчик.
</ul>

<h2 class="p h2">Статусная строка</h2>

<p>На статусной строке отображаются индикаторы режимов работы эмулируемого компьютера, меню выбора
эмулируемого компьютера, кнопка сброса компьютера и кнопка запуска отладчика. Элементы статусной строки по порядку:
<ul>
<li>кнопка сброса;
<li>кнопка выключения звука;
<li>индикатор режима, возможны три режима:
<ul>
<li><svg xmlns="http://www.w3.org/2000/svg" viewBox='0 0 50 50'><path fill="#090" d="M3.4,50V0l43.1,25L3.4,50z"/></svg>
 -- рабочий режим, компьютер выполняет программу, принимает команды с клавиатуры;
<li><svg xmlns="http://www.w3.org/2000/svg" viewBox='0 0 50 50'><path fill="#f33" d="M18,50H0V0h18V50z M50,0H32v50h18V0z"/></svg>
 -- пауза, выполнение программы останавливается, рендеринг продолжается, этот режим включается при запуске отладчика;
<li><svg xmlns="http://www.w3.org/2000/svg" viewBox='0 0 50 50'><path fill="#f33" d="M50,50H0V0h50V50z"/></svg>
 -- остановка, выполнение программы останавливается, рендеринг прекращается, этот режим включается автоматически, когда
окно эмулятора теряет фокус или вызвано модальное окно;
</ul>
<li>индикатор текущего языка клавиатуры компьютера: латинский [<b>ЛАТ</b>] или русский [<b>РУС</b>];
<li>индикатор магнитофонного входа и выхода компьютера, индикатор подключен непосредственно к линиям PC0 и PC4 порта
клавиатуры, при записи/чтении на/с магнитофон(а) на индикаторе отображается текст [<b>ЗАПИСЬ</b>]/[<b>ЧТЕНИЕ</b>]
соответственно и индикатор мерцает в такт сигналу, по мерцанию индикатора можно судить о том, что идёт операция
чтения/записи;
<li>индикатор типа микропроцессора, отображается эмулируемый в данный момент микропроцессор, возможные варианты:
i8080, i8085, Z80;
<li>индикатор тактовой частоты микропроцессора, отображается текущая тактовая частота микропроцессора;
<li>меню выбора эмулируемого компьютера, также через это меню осуществляется перезапуск текущей конфигурации;
перезапуск может понадобиться, например, при смене микропроцессора, т.к. микропроцессор нельзя поменять на лету;
<li>кнопка запуска отладчика.
</ul>

<h2 class="p h2">Конфигурация эмулятора</h2>

<p>Панель конфигурации эмулятора вызывается через иконку гамбургер-меню [&#x2630;], которая находится в горизонтальном
меню внизу окна, либо комбинацией клавиш <span>Alt+F12</span>. Для конфигурирования доступны следующие опции:
<ul>
<li><span>Экран</span>:
<ul>
<li><b>Масштабирование</b> -- задаёт увеличение размера экрана эмулируемого компьютера, размер задаётся от 1 до 4, шаг
изменения размера равен 0,5; имеется особое значение -- 0, при котором высота экрана подстраивается под высоту окна;
<li><b>Сглаживание</b> -- включает или выключает режим сглаживания для неквадратных пикселей (определяется соотношением
сторон экрана) и нецелых пикселей (масштабирование экрана не кратно разрешению экрана компьютера);
<li><b>Яркость</b> -- имеет влияние только при включённом сглаживании и нецелых пикселях, задаёт яркость переходных
пикселей, используется для получения чёткого изображения;
<li><b>Контрастность</b> -- имеет влияние только при включённом сглаживании и нецелых пикселях, задаёт контрастность
переходных пикселей, используется для получения чёткого изображения;
<li><b>Соотношение сторон</b> -- задаёт соотношением сторон экрана эмулируемого компьютера; при значении 1,560 пикселы
будут квадратными, но изображение будет вытянуто по горизонтали, при значении 1,354 видимая область экрана будет иметь
соотношение сторон как 4 к 3;
</ul>
<li><span>Рендеринг</span> -- определяет способ получения изображения:
<ul>
<li><b>Синхронно с КР580ВГ75</b> -- каждый кадр, насколько это возможно, выводится максимально синхронно с кадровыми
синхроимпульсами микросхемы видеоконтроллера, согласно его настройкам, это наиболее близкое поведение к реальному
компьютеру;
<li><b>Синхронно с монитором</b> -- каждый кадр выводится синхронно с кадровыми синхроимпульсами вашего монитора, это
обеспечивает более гладкую картинку, но может создавать дополнительную задержку при выполнении программ, т.к. при
обычных настройках микросхемы видеоконтроллера его частота кадровой развёртки равна 50 Гц, а для мониторов частота
кадровой развёртки обычно составляет 60 Гц, что пропорционально увеличивает частоту запросов к контроллеру ПДП;
<li><b>Пропускать один кадр</b> -- эта опция доступна только для рендеринга кадров синхронно с КР580ВГ75, пропуск
одного кадра позволяет уменьшить нагрузку на процессор, не ухудшая при этом качество изображения, на количество
запросов ПДП не влияет;
<li><b>ЭЛТ-эффект</b> -- позволяет получить изображение с эффектом старого монитора или телевизора, когда из-за низкого
разрешения видны линии растра; для получения лучшего эффекта рекомендуется контрастность снизить до минимума (1), а для
регулировки использовать только яркость;
</ul>
<li><span>Микропроцессор</span> -- выбор типа микропроцессора и его тактовой частоты, для смены микропроцессора
необходимо перезапустить эмулируемый компьютер;
<li><span>Клавиатура</span> -- настройка раскладки клавиатуры:
<ul>
<li><b>QWERTY</b> -- в этой раскладе все введённые символы соответствуют клавишам на клавиатуре;
<li><b>JCUKEN</b> -- в этой раскладе клавиатура приближается к раскладке клавиатуры компьютера "Радио-86РК".
</ul>
<li><span>Звук</span>
<ul>
<li><b>Громкость</b> -- настройка уровня громкости;
<li><b>Звук с магнитофона</b> -- подключает магнитофонный выход к устройству воспроизведения звука.
</ul>
</ul>

<h2 class="p h2">Клавиатура</h2>

<p>Эмулятор предоставляет на выбор две раскладки клавиатуры: <b>QWERTY</b> и <b>JCUKEN</b>. <b>QWERTY</b>-раскладка
удобна тем, что все символы вводятся как есть -- каждый символ соответствует клавише. Однако, программное обеспечение
пишется для стандартной клавиатуры компьютера "Радио-86РК" в раскладке <b>JCUKEN</b>. Это может быть критично, например,
для игр, где требуется, чтобы определённые клавиши располагались по-соседству.
<p>По задумке авторов, клавиатура компьютера "Радио-86РК" выглядит вот так:</p>

<div class=kbd>
<div t=; b=&plus;></div><div t=1 b=&#x21;></div><div t=2 b=&#x22;></div><div t=3 b=#></div>
<div t=4 b=&#xA4;></div><div t=5 b=%></div><div t=6 b=&></div><div t=7 b=&#x27;></div>
<div t=8 b=(></div><div t=9 b=)></div><div t=0 b=&nbsp;></div><div t=&minus; b==></div>
<div>ТАБ</div><div>ПС</div>
<b></b>
<div arr>&#x2196;</div><div>F1</div><div>СТР</div>
<b></b>
<div t=Й b=J></div><div t=Ц b=C></div><div t=У b=U></div><div t=К b=K></div>
<div t=Е b=E></div><div t=Н b=N></div><div t=Г b=G></div><div t=Ш b=[></div>
<div t=Щ b=]></div><div t=З b=Z></div><div t=Х b=H></div><div t=: b=*></div><div>ВК</div>
<b></b><b></b>
<div arr>&#x2190;</div><div arr>&#x2191;</div><div arr>&#x2192;</div>
<div>УС</div><div t=Ф b=F></div><div t=Ы b=Y></div><div t=В b=W></div>
<div t=А b=A></div><div t=П b=P></div><div t=Р b=R></div><div t=О b=O></div>
<div t=Л b=L></div><div t=Д b=D></div><div t=Ж b=V></div><div t=Э b=\></div>
<div t=. b=&gt;></div><div>ЗБ</div>
<b></b>
<div>F2</div><div>F3</div><div>F4</div>
<b></b>
<div>СС</div><div t=Я b=Q></div><div t=Ч b=^></div><div t=С b=S></div>
<div t=М b=M></div><div t=И b=I></div><div t=Т b=T></div><div t=Ь b=X></div>
<div t=Б b=B></div><div t=Ю b=@></div><div t=, b=&lt;></div><div t=/ b=?></div>
<div t=РУС/ b=ЛАТ></div>
<b></b><b></b>
<div w s4 arr>&#x2193;</div><div>АР2</div>
<b s7></b>
<div w s14></div>
</div>

<p>Клавиатура компьютера "Радио-86РК" имеет некоторые специфические клавиши, которые отсутствуют на современных
клавиатурах. К таким клавишам относятся:
<ul>
<li><span>РУС/ЛАТ</span> -- переключает язык ввода;
<li><span>ПС</span> -- "перевод строки", смещает курсор вниз или скроллирует экран;
<li><span>[Стрелка в угол]</span> -- "курсор в начало экрана", перемещает курсор в левый верхний угол экрана;
<li><span>СТР</span> -- "стирание экрана", стирает экран и устанавливает курсор в нулевую позицию.
</ul>

<p>Этим клавишам назначены свободные кнопки.

<h4>Раскладка QWERTY</h4>

<div class="kbd2 kbd">
<div>АР2</div>
<b s4></b><div>F1</div><div>F2</div><div>F3</div><div>F4</div>
<b></b><div>F5</div><div u>F6</div><div u>F7</div><div u>F8</div>
<b></b><div u>F9</div><div u>F10</div><div u>F11</div><div u>F12</div>
<b></b><div u s>Print<br>Scr</div><div s>РУС/<br>ЛАТ</div><div u s>Pause</div>
<b s18></b>
<b sp></b>
<div u t=~ b="&#x60; Ё"></div><div t=&#x21; b=1></div><div t=@ b="2 &#x22;"></div><div t=# b=3></div>
<div t=$ b="4 ;"></div><div t=% b=5></div><div t=^ b="6 :"></div><div t=& b="7 ?"></div>
<div t=* b=8></div><div t=( b=9></div><div t=) b=0></div><div t=_ b=&minus;></div><div t=&plus; b==></div>
<div s8 w>ЗБ</div>
<b></b><div>ПС</div><div arr>&#x2196;</div><div u s>Page<br>Up</div>
<b></b><div u s>Num<br>Lock</div><div t=/></div><div t=*></div><div t=&minus;></div>
<div s6 w>ТАБ</div><div r t=Q b=Й></div><div r t=W b=Ц></div><div r t=E b=У></div><div r t=R b=К></div>
<div r t=T b=Е></div><div r t=Y b=Н></div><div r t=U b=Г></div><div r t=I b=Ш></div>
<div r t=O b=Щ></div><div r t=P b=З></div><div r t=[ b=Х></div><div t=] b=&nbsp;></div>
<div s6 w></div>
<b></b><div>АР2</div><div>СТР</div><div u s>Page<br>Down</div>
<b></b><div n t=7></div><div n t=8></div><div n t=9></div><div r2 t=&plus;></div>
<div s7 w>РУС/ЛАТ</div><div r t=A b=Ф></div><div r t=S b=Ы></div><div r t=D b=В></div>
<div r t=F b=А></div><div r t=G b=П></div><div r t=H b=Р></div><div r t=J b=О></div>
<div r t=K b=Л></div><div r t=L b=Д></div><div t=: b="; Ж"></div><div r t=&#x22; b="' Э"></div>
<div t=/ b=\></div>
<div s5 w enter2>ВК</div>
<b s16></b><div n t=4></div><div n t=5></div><div n t=6></div>
<div s9 w>СС</div><div r t=Z b=Я></div><div r t=X b=Ч></div><div r t=C b=С></div>
<div r t=V b=М></div><div r t=B b=И></div><div r t=N b=Т></div><div r t=M b=Ь></div>
<div t=&lt; b="&#x2009;, Б"></div><div t=&gt; b=". Ю"></div><div t="? ," b="&#x2009;/ ."></div>
<div s11 w>СС</div>
<b s6></b><div arr>&#x2191;</div><b s6></b>
<div n t=1></div>
<div n t=2></div>
<div n t=3></div><div s r2>ВК</div>
<div s5 w>УС</div><div u s5 w>Meta</div><div u s5 w>Alt</div>
<div s25 w></div>
<div u s5 w>Alt</div><div u s5 w>Meta</div><div u s5 w>Menu</div><div s5 w>УС</div>
<b></b><div arr>&#x2190;</div><div arr>&#x2193;</div><div arr>&#x2192;</div>
<b></b><div num0 s8 w n t=0></div><div n t=.></div>
</div>

<h4>Раскладка JCUKEN</h4>

<div class="kbd2 kbd">
<div>АР2</div>
<b s4></b><div>F1</div><div>F2</div><div>F3</div><div>F4</div>
<b></b><div>F5</div><div u>F6</div><div u>F7</div><div u>F8</div>
<b></b><div u>F9</div><div u>F10</div><div u>F11</div><div u>F12</div>
<b></b><div u s>Print<br>Scr</div><div s>РУС/<br>ЛАТ</div><div u s>Pause</div>
<b s18></b>
<b sp></b>
<div r t=+ b=;></div><div r t=&#x21; b=1></div><div r t=&#x22; b=2></div><div r t=# b=3></div>
<div r t=&#xA4; b=4></div><div r t=% b=5></div><div r t=& b=6></div><div r t=&#x27; b=7></div>
<div r t=( b=8></div><div r t=) b=9></div><div r t=" " b=0></div><div r t== b=&minus;></div><div r t=? b=/></div>
<div s8 w>ЗБ</div>
<b></b><div>ПС</div><div arr>&#x2196;</div><div u s>Page<br>Up</div>
<b></b><div u s>Num<br>Lock</div><div t=/></div><div t=*></div><div t=&minus;></div>
<div s6 w>ТАБ</div><div r t=J b=Й></div><div r t=C b=Ц></div><div r t=U b=У></div><div r t=K b=К></div>
<div r t=E b=Е></div><div r t=N b=Н></div><div r t=G b=Г></div><div r t=[ b=Ш></div>
<div r t=] b=Щ></div><div r t=Z b=З></div><div r t=H b=Х></div><div r t=* b=:></div>
<div s6 w></div>
<b></b><div>АР2</div><div>СТР</div><div u s>Page<br>Down</div>
<b></b><div n t=7></div><div n t=8></div><div n t=9></div><div r2 t=&plus;></div>
<div s7 w>РУС/ЛАТ</div><div r t=F b=Ф></div><div r t=Y b=Ы></div><div r t=W b=В></div>
<div r t=A b=А></div><div r t=P b=П></div><div r t=R b=Р></div><div r t=O b=О></div>
<div r t=L b=Л></div><div r t=D b=Д></div><div r t=V b=Ж></div><div r t=\ b=Э></div>
<div r t=&gt; b=.></div>
<div s5 w enter2>ВК</div>
<b s16></b><div n t=4></div><div n t=5></div><div n t=6></div>
<div s9 w>СС</div><div r t=Q b=Я></div><div r t=^ b=Ч></div><div r t=S b=С></div>
<div r t=M b=М></div><div r t=I b=И></div><div r t=T b=Т></div><div r t=X b=Ь></div>
<div r t=B b=Б></div><div r t=@ b=Ю></div><div r t=&lt; b=,></div>
<div s11 w>СС</div>
<b s6></b><div arr>&#x2191;</div><b s6></b>
<div n t=1></div>
<div n t=2></div>
<div n t=3></div><div s r2>ВК</div>
<div s5 w>УС</div><div u s5 w>Meta</div><div u s5 w>Alt</div>
<div s25 w></div>
<div u s5 w>Alt</div><div u s5 w>Meta</div><div u s5 w>Menu</div><div s5 w>УС</div>
<b></b><div arr>&#x2190;</div><div arr>&#x2193;</div><div arr>&#x2192;</div>
<b></b><div num0 s8 w n t=0></div><div n t=.></div>
</div>

<h2 class="p h2">Магнитофон</h2>

<p>В эмуляторе реализован механизм чтения и записи на магнитную ленту. Полноценно работают такие директивы Монитора,
как <b>I</b> и <b>O</b>, а также магнитофонные операции в прикладных программах, например, в интерпретаторе
языка BASIC можно загружать и выгружать программы командами <b>LOAD</b>/<b>SAVE</b> (<b>CLOAD</b>/<b>CSAVE</b>,
<b>MLOAD</b>/<b>MSAVE</b> -- в зависимости от версии интерпретатора). Разумеется, подключать магнитофон к компьютеру
не требуется -- весь обмен осуществляется посредством файлов.
<p>Для загрузки файла в память компьютера (директивой <b>I</b> или командой <b>LOAD</b>) требуется выполнить
дополнительное действие -- предварительно загрузить файл во внутренний буфер. Загрузка во внутренний буфер
осуществляется по команде <span>Alt+Ctrl+F3</span>. Когда загрузка будет закончена, внутренний буфер очищается.
<p>Во время операций чтения и записи на магнитофон отключается экран компьютера и для контроля процесса служит
индикатор [<b>МАФОН</b>] в статусной строке, который мерцает, когда происходит обмен, а текст на индикаторе меняется на
[<b>ЧТЕНИЕ</b>] или [<b>ЗАПИСЬ</b>] в зависимости от направления передачи данных. Длительность магнитофонных операций
в эмуляторе соответствует длительности работы на реальном компьютере с реальным магнитофоном, потому как механизм
магнитофонных операций реализован не путём перехвата вызова системных подпрограмм чтения/записи, а непосредственным
их исполнением.

<h2 class="p h2">ROM-диск</h2>
<p>ROM-диск -- альтернативный способ загрузки программ в компьютер. Для подключения к компьютеру образа ROM-диска
необходимо вызвать загрузчик командой <span>Alt+R</span>.

<h2 class="p h2">Звук</h2>
<p>В эмуляторе реализованы две системы формирования звука: 1-битный звук и генератор меандра.
<p>Для 1-битного звука источником является программно-управляемый цифровой выход. В компьютере "Радио-86РК" для вывода
звука используется выход <b>INTE</b> микропроцессора. Дополнительно в панеле конфигурации для 1-битного звука в качестве
источника можно подключить магнитофонный выход. Магнитофонный выход для вывода звука могут использовать некоторые игры и
демо-программы.
<p>В остальных компьютерах для формирования звуковых сигналов используется специализированная микросхема КР580ВИ53
(программируемый трехканальный таймер, клон i8253) в режиме генератора меандра, её эмулирует вторая система формирования
звука.
<p>Для управления звуковым выходом предназначены следующие клавиши:
<ul>
<li><span>Alt+стрелка вверх</span> -- увеличение громкости;
<li><span>Alt+стрелка вниз</span> -- уменьшение громкости;
<li><span>Alt+M</span> -- выключение звука.
</ul>

<h2 class="p h2">Очень горячие клавиши</h2>

<p>Для удобства и быстрого вызова функций эмулятора имеются горячие клавиши. В рабочем режиме эмулятора, чтобы не
было конфликтов с клавишами компьютера, все комбинации горячих клавиш имеют сочетание с клавишей [<b>Alt</b>].
<ul>
<li><span>Alt+Meta</span> -- сброс компьютера (кнопка RESET);
<li><span>Alt+1</span>, <span>Alt+2</span>, <span>Alt+3</span>, <span>Alt+4</span> -- масштабирование экрана компьютера
соответственно в 1, 2, 3 или 4 раза;
<li><span>Alt+5</span>, <span>Alt+6</span>, <span>Alt+7</span> -- масштабирование экрана компьютера соответственно в
1,5, 2,5, или 3,5 раза;
<li><span>Alt+0</span> -- авто-масштабирование экрана компьютера, высота экрана подстраивается под высоту окна;
<li><span>Alt+F1</span> -- вызов справки;
<li><span>Alt+F3</span> -- вызов загрузчика файлов, загрузчик файлов -- это быстрый механизм загрузки файлов в память
компьютера. Если загружаемый файл имеет правильный .rk-формат, то он будет загружен по тем адресам, которые указаны в
файле. Если загружаемый файл -- это двоичный файл, не имеющий определённого формата, он будет загружен по нулевому
адресу. Запуск на выполнение загруженного файла не производится. Важно: загрузчик файлов производит автоматический
сброс компьютера до загрузки файла в память;
<li><span>Alt+Ctrl+F3</span> -- вызов загрузчика файлов для магнитофонного ввода;
<li><span>Alt+F5</span> -- вызов загрузчика файлов и запуск программы. Действие полностью аналогичное функции
<span>Alt+F3</span>, с той лишь разницей, что если файл имеет правильный .rk-формат, то он будет запущен на выполнение;
<li><span>Alt+F11</span> или <span>Alt+Enter</span> -- переход в полноэкранный режим, а также выход из него. Браузеры
имеют встроенный механизм выхода из полноэкранного режима -- это кнопка <span>Escape</span> и отменить этот механизм
невозможно, поэтому, чтобы в полноэкранном режиме можно было пользоваться клавишей <span>Escape</span> она имеет
дубликат на клавише <span>Delete</span>. В этом режиме отображаются только экран эмулируемого компьютера и статусная
строка, отладчик и панель конфигурации в этом режиме недоступны;
<li><span>F11</span> -- переход в полноэкранный режим, это единственная функция, которая вызывается без клавиши
[<b>Alt</b>]. Отличие от функции <span>Alt+F11</span> в том, что в полноэкранный режим разворачивается не отдельная
часть, а окно браузера целиком, в этом режиме доступны все компоненты эмулятора, включая отладчик и панель конфигурации,
также в эмулируемом компьютере можно полноценно пользоваться клавишей <span>Escape</span>. Чтобы экран эмулируемого
комьютера занимал всю высоту окна необходимо дополнительно вызвать функцию <span>Alt+0</span>;
<li><span>Alt+F12</span> -- вызов панели конфигурации эмулятора;
<li><span>Alt+Num &plus;</span> и <span>Alt+Num &minus;</span> -- увеличение и уменьшение на 1 МГц тактовой частоты
микропроцессора, текущая тактовая частота отображается на индикаторе в статусной строке, действие полностью аналогично
настройке тактовой частоты в панеле конфигурации эмулятора;
<li><span>Alt+Num *</span> -- отключение регулируемой тактовой частоты микропроцессора и установка частоты, заданной
конфигурацией компьютера;
<li><span>Alt+Num 0</span> -- включение/выключение турбо-режима (только для некоторых конфигураций);
<li><span>Alt+стрелка вверх</span> -- увеличение громкости;
<li><span>Alt+стрелка вниз</span> -- уменьшение громкости;
<li><span>Alt+M</span> -- выключение звука;
<li><span>Alt+R</span> -- вызов загрузчика файлов для загрузки образа ROM-диска;
<li><span>Alt+S</span> -- создание скриншота экрана компьютера, файл скриншота сохраняется в формате .png;
<li><span>Alt+C</span> -- вызов интерфейса создания пользовательских конфигураций;
<li><span>Alt+Insert</span> -- вставка текста из буфера обмена в программу. Вставка текста производится через имитацию
нажатия клавиш компьютера, поэтому, чтобы вставка сработала, необходимо, чтобы программа производила опрос клавиатуры;
<li><span>Alt+Pause</span> -- запуск отладчика.
</ul>

<h2 class="p h2">Отладчик</h2>

<p>Отладчик -- эффективное средство поиска ошибок в программе, а также анализа логики работы программы.
Отладчик состоит из следующих секций:

<ul>
<li><span>Дизассемблер</span>;
<li><span>Регистры микропроцессора</span>;
<li><span>Регистр флагов микропроцессора</span>;
<li><span>Дамп памяти</span>;
<li><span>Информационная строка</span>;
<li><span>Точки останова</span>.
</ul>

<p>Управление отладчиком осуществляется как мышкой, так и с клавиатуры. Для управления с клавиатуры необходимо выбрать
активную секцию, выбор делается клавишей <span>Tab</span> или <span>Shift+Tab</span>, активная секция подсвечивается
зелёной рамкой. 
<p>Некоторые функции отладчика всегда доступны с клавиатуры, независимо от текущей активной секции. К ним относятся:
<ul>
<li><span>F5</span> -- запуск программы в памяти на исполнение, эмулятор переходит в рабочий режим, программа в памяти
выполняется обычном образом до тех пор, пока не встретится точка останова, клавиатура полностью под контролем
эмулируемого компьютера, индикатором запущенной программы служит значок рабочего режима
[<svg xmlns="http://www.w3.org/2000/svg" viewBox='0 0 50 50'><path fill="#090" d="M3.4,50V0l43.1,25L3.4,50z"/></svg>]
в статусной строке;
<li><span>F7</span> -- выполнение одной инструкции микропроцессора;
<li><span>F8</span> -- выполнение кода до тех пор, пока регистр счётчика инструкций микропроцессора (<b>PC</b>) не будет
указывать на адрес следующей инструкции. Для инструкций, не меняющих значение регистра счётчика (<b>PC</b>), а также
для безусловных переходов (<b>JMP</b>, <b>PCHL</b>, <b>RET</b>), действие полностью аналогично функции <span>F7</span>.
Для инструкций условных переходов функция <span>F8</span> позволяет выполнить цикл за один шаг, для инструкций вызова
подпрограмм -- выполнить подпрограмму, не заходя в неё. Функция <span>F8</span> переводит эмулятор в рабочий режим и
выполняет программу до срабатывания условия остановки. Некоторые подпрограммы могут ожидать ввода с клавиатуры или иного
устройства и эмулятор будет оставаться в рабочем режиме до тех пор, пока не будет осуществлён ввод. Определить текущий
режим можно по значку в статусной строке;
<li><span>F9</span> -- автоматическое выполнение инструкций микропроцессора шаг за шагом, скорость выполнения инструкций
составляет примерно одна инструкция за 5 мс;
<li><span>F10</span> -- вызов модального окна для редактирования точек останова;
<li><span>Ctrl+0..7</span> -- инверсия соответствующего бита флагового регистра;
<li><span>Pause</span> -- выход из отладчика.
</ul>

<h3>Дизассемблер</h3>

<p><b>Мышка</b>:
<ul>
<li><span>Колёсико мышки</span> -- прокрутка листинга на одну строку;
<li><span>Ctrl+колёсико мышки</span> -- прокрутка листинга на одну страницу;
<li><span>Клик</span> -- установка нового положения курсора;
<li><span>Даблклик</span> -- установка точки останова (breakpoint) на выполнение.
</ul>

<p><b>Клавиатура</b>:
<ul>
<li><span>Стрелки вверх/вниз</span> -- перемещение курсора по листингу, прокрутка на одну строку при достижении границы
листинга;
<li><span>Ctrl+стрелки вверх/вниз</span> -- перемещение курсора по листингу с одновременной прокруткой листинга;
<li><span>Shift+стрелки вверх/вниз</span> -- прокрутка листинга на одну строку без перемещения курсора;
<li><span>PageUp/PageDown</span> -- прокрутка листинга на одну страницу;
<li><span>Home/End</span> -- установка курсора на начало или конец листинга текущей страницы;
<li><span>Пробел</span> -- установка точки останова на выполнение.
</ul>

<h3>Регистры микропроцессора</h3>

<p><b>Мышка</b>:
<ul>
<li><span>Клик</span> -- установка нового положения курсора;
<li><span>Даблклик</span> -- переход в режим редактирования значения регистра, значение задаётся в шестнадцатеричном виде.
</ul>

<p><b>Клавиатура</b>:
<ul>
<li><span>Стрелки вверх/вниз</span> -- перемещение курсора по списку;
<li><span>Home/End</span> -- установка курсора на начало или конец списка;
<li><span>PageUp</span> или <span>Num &plus;</span> -- увеличение на единицу значения регистра;
<li><span>PageDown</span> или <span>Num &minus;</span> -- уменьшение на единицу значения регистра;
<li><span>Delete</span> -- обнуление регистра;
<li><span>Пробел</span> или <span>Num *</span> -- инверсия регистра;
<li><span>Enter</span> -- переход в режим редактирования значения регистра, значение задаётся в шестнадцатеричном виде.
</ul>

<p>Вместе с основными регистрами микропроцессора в этой секции дополнительно отображаются два псевдо-регистра: значение
ячейки памяти по адресу в <b>HL</b> (байт) и значение ячейки памяти по адресу в <b>SP</b> (слово). Изменять значения в
этих ячейках нельзя. Кроме того, некоторые программируемые микросхемы периферии компьютера могут работать неправильно,
если к ним будет осуществляться произвольный доступ, поэтому, для исключения сбоев, значения из этих двух
псевдо-регистров <b>[HL]</b> и <b>[SP]</b> будет выводиться только тогда, когда они содержат адреса памяти (ОЗУ или ПЗУ),
а если они будут содержать адреса микросхем периферии, то значения по этим адресам считано не будет и вывод будет
подавлен.

<h3>Регистр флагов микропроцессора</h3>

<p><b>Мышка</b>:
<ul>
<li><span>Клик</span> -- установка нового положения курсора;
<li><span>Даблклик</span> -- инверсия флага.
</ul>

<p><b>Клавиатура</b>:
<ul>
<li><span>Стрелки вверх/вниз</span> -- перемещение курсора по списку;
<li><span>Home/End</span> -- установка курсора на начало или конец списка;
<li><span>Пробел</span> или <span>Enter</span> -- инверсия флага.
</ul>

<h3>Дамп памяти</h3>

<p><b>Мышка</b>:
<ul>
<li><span>Колёсико мышки</span> -- прокрутка дампа на одну строку;
<li><span>Ctrl+колёсико мышки</span> -- прокрутка дампа на одну страницу;
<li><span>Клик</span> -- установка нового положения курсора.
</ul>

<p><b>Клавиатура</b>:
<ul>
<li><span>Tab</span> -- если курсор находится в секции кода, то переход в текстовую секцию дампа; если курсор находится
в текстовой секции, то выход из секции дампа отладчика;
<li><span>Shift+Tab</span> -- если курсор находится в текстовой секции, то переход в секцию кода дампа; если курсор
находится в секции кода, то выход из секции дампа отладчика;
<li><span>Стрелки вверх/вниз</span> -- перемещение курсора по дампу, прокрутка на одну строку при достижении границы
дампа;
<li><span>Ctrl+стрелки вверх/вниз</span> -- перемещение курсора по дампу с одновременной прокруткой дампа;
<li><span>PageUp/PageDown</span> -- прокрутка дампа на одну страницу;
<li><span>Home/End</span> -- установка курсора на начало или конец текущей строки дампа;
<li><span>Ctrl+Home</span> -- вывод дампа по нулевому адресу;
<li><span>Ctrl+End</span> -- вывод дампа по последнему адресу.
</ul>

<p>Редактирование дампа осуществляется простым вводом шестнадцатеричных чисел в секции кода или печатных символов в
текстовой секции.
<p>Для быстрого вывода дампа по произвольном адресу имеется меню [<b>DUMP</b>], в котором можно выбрать адрес,
содержащийся в 16-разрядном регистре, или ввести адрес с клавиатуры.

<h3>Информационная строка</h3>
<p>Информационная строка содержит справочную информацию:
<ul>
<li><span>CPU</span> -- количество тактов, выполненных микропроцессором;
<li><span>DMA</span> -- параметры настройки третьего канала контроллера ПДП. Несмотря на то, что пересылка данных в
контроллер ЭЛТ производится по второму каналу ПДП, здесь выводится состояние третьего, потому что второй канал является
рабочим и значения в нём, считанные в произвольные моменты времени, будут иметь случайный характер, а значения в третьем
канале всегда фиксированные и содержат копию значений второго канала (это справедливо только для микросхемы i8257).
Параметры выводятся в формате <b>ADDR</b>/<b>CNTR</b>, где <b>ADDR</b> -- начальный адрес экранной памяти, <b>CNTR</b>
 -- размер экранной памяти, значения выводятся в шестнадцатеричном формате;
<li><span>CRT</span> -- параметры настройки контроллера ЭЛТ:
<ul>
<li><span>scr</span> -- параметры кадра в формате <b>COLS</b>/<b>ROWS</b>, где <b>COLS</b> -- число знаков в знакоряду,
<b>ROWS</b> -- число знакорядов в кадре;
<li><span>row</span> -- параметры знакоряда в формате <b>LINES</b>/<b>ULINE</b>, где <b>LINES</b> -- число строк растра
в знакоряду, <b>ULINE</b> -- номер строки подчеркивания в знакоряду;
<li><span>offs</span> -- режим счётчика строк, принимает значение 0 или 1, где 0 -- не сдвинуто, 1 -- смещено на 1 счёт;
<li><span>trns</span> -- режим атрибутов, принимает значение 0 или 1, где 0 -- непрозрачные, 1 - прозрачные;
<li><span>brst</span> -- параметры запросов ПДП в формате <b>BSC</b>/<b>BCC</b>, где <b>BSC</b> -- интервал между
пакетами, число синхроимпульсов знака между пакетными запросами ПДП, <b>BCC</b> -- число запросов ПДП в пакете;
<li><span>fr</span> -- частота кадров.
</ul>
</ul>

<p>Кнопка <b>reset</b> сбрасывает текущее значение подсчитанных тактов микропроцессора, сбросить такты также можно с
клавиатуры комбинацией клавиш <span>Ctrl+0</span>. Используя обнуление количество тактов, можно подсчитывать такты
микропроцессора на выполнение определённых участков кода и, таким образом, оценивать эффективность программы.

<h3>Точки останова</h3>

<p>Точки останова (breakpoints) -- условия, при которых выполнение программы прерывается и управление передаётся
отладчику, используются для отладки и анализа работы программы. После срабатывания точки останова отладчик отобразит
обновлённое состояние компьютера: ассемблерный листинг участка программы с установленным курсором в том месте, где
произошло прерывание; состояние регистров микропроцессора; состояние флагов микропроцессора; количество тактов,
выполненных микропроцессором с момента запуска программы. В дальнейшем выполнение программы может быть продолжено с
этого же места.
<p>Доступны три типа точек останова для следующих действий микропроцессора:
<ul>
<li>выполнение кода по указанному адресу;
<li>чтение данных по указанному адресу;
<li>запись данных по указанному адресу.
</ul>

<p>Каждой точке останова можно дополнительно задать счётчик итераций, по достижении которого точка останова активируется
(колонка "Срабатывание"). Также, если возникнет такая необходимость, чтобы не удалять точку останова из списка, можно
временно деактивировать её, убрав галочку в колонке "Вкл". На один адрес можно установить точку останова только одного
типа.
<p>Добавление, удаление и редактирование точек останова осуществляется в отдельном окне, которое вызывается клавишей
<span>F10</span>. В секции дизассемблера имеется возможность быстро поставить точку останова на выполнение, для этого
необходимо установить курсор на нужную инструкцию и нажать клавишу <span>пробел</span>. В ассемблерном листинге активные
точки останова на выполнение отмечены символом "диез" ("<b>#</b>").
<p>Вместо одиночной точки останова возможно задавать диапазон адресов, которые будут действовать по общему правилу. Для
диапазона адресов необходимо указать два параметра: "Адрес" -- это начальный адрес диапазона и "Диапазон" -- это
конечный адрес диапазона, все адреса задаются в шестнадцатеричном коде. Дополнительно можно указать маску адреса в поле
"Маска", по которой будут прореживаться адреса. Маска адреса используется совместно с диапазоном адресов. Без указания
маски адреса (оставить пустое поле) для точек останова будет использоваться непрерывный диапазон адресов. С маской в
диапазон адресов будут входить только те адреса из диапазона, которые с наложенной на них маской будут равны начальному
адресу диапазона. Применение маски удобно в том случае, когда необходимо выделить только отдельные биты адреса.
<p>Пример использования маски адресов. В компьютере "Радио-86РК" адресное пространство поделено на блоки по 8 килобайт,
4 блока используются под ОЗУ, остальные 4 блока распределены между периферийными устройствами и ПЗУ. Таким образом,
например, под порт клавиатуры, которому достаточно всего 4 байта, отведено 8192 байта адресного пространства и обращение
к каждому байту из этого блока осуществляет доступ к порту клавиатуры. Чтобы в отладчике не пропускать операции с портом
клавиатуры при обращении к любому адресу из 8192 байт надо задать диапазон адресов <b>800X</b>&ndash;<b>9FFF</b>, где
<b>X</b> -- это 0, 1, 2 или 3 в зависимости от того, обращение к какому конкретному порту необходимо перехватывать, а
маску адреса указать как <b>8003</b>.

<h3>&nbsp;</h3>

